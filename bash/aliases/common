#!/bin/bash

_gemset() {
  if [[ -z $GEM_SET ]]; then
    echo ""
  else
    echo "$GEM_SET "
  fi
}

_suspended() {
  jobs | wc -l | tr -d " "
}

pg() {
  if [ $1 == "start" ]
  then
    pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start
  else
    pg_ctl -D /usr/local/var/postgres stop -s -m fast
  fi
}

# Kudos to djanowski for this. Use ack to search files and open it in
# `vi` with the searched text as the last searched phrase in vi.
vack() {
  vi -p -c "/$1" $(ack -al $@)
}

# Search all files by default. This fixes the problem that *.css, *.less,
# *.sass files aren't usually seacrched.
alias ack="ack -a"

# Display this file, with basic highlighting.
alias ah="cat ~/dotfiles/bash/aliases/common | \
          highlight \
            blue '^# .*' \
            cyan '^alias' \
            purple '".*"' \
            red ' .*=' \
            yellow '=' | less -R"

# Utility
alias reload="source ~/.bashrc"

# Common commands.
alias a="ls -A"           # -A all except literal . ..
alias la="ls -A -l -G"
alias c="clear"
alias cdd="cd -"          # goto last dir cd"ed from
alias cl="clear; l"
alias cls="clear; ls"
alias h="history"
alias l.="ls -d .[^.]*"
alias l="ls -lhGt"        # -l long listing, most recent first
                          # -G color
alias lh="ls -lh"
alias ll="ls -lhG"        # -l long listing, human readable, no group info
alias lt="ls -lt"         # sort with recently modified first
alias md="mkdir -p"
alias ..="cd .."          # up one dir
