#!/usr/bin/env ruby

unless ARGV.size == 3
  abort("Usage: resolution Virtual1 1920 1080")
end

output = ARGV[0]
x = ARGV[1]
y = ARGV[2]

mode = `cvt #{x} #{y}`[/^Modeline (.+)$/, 1]
args = mode.split(/\s+/)
desc = args[0]

`xrandr --newmode #{args.join(' ')}`
`xrandr --addmode #{output} #{desc}`
`xrandr --output  #{output} --mode #{desc}`
